# Word2048 增强版 - 单词学习游戏

## 📖 项目简介

Word2048 是一款结合了经典 2048 游戏机制与英语单词学习的教育游戏。通过游戏化的方式帮助用户在娱乐中学习和记忆英语单词。

## ✨ 主要功能

### 1. **游戏机制**
- 经典 4x4 网格 2048 玩法
- **根据右上角数字合并**：相同数字的方块可以合并
- **数字序列**：2 → 4 → 8 → 16 → 32 → 64 → 128 → 256 → 512 → 1024 → **2048**
- **流畅的滑动动画**：方块移动时有平滑的滑动效果
- 达到 2048 即为胜利（可继续挑战更高分）
- 实时计分系统（合并得分 = 方块数字）

### 2. **词汇系统**
- **6大主题分类**：
  - 🐾 动物 (Animals)
  - 🍎 食物 (Food)
  - 🌿 自然 (Nature)
  - 💻 科技 (Tech)
  - 👔 职业 (Professions)
  - 🏠 日常 (Daily)
- 每个分类 11 个难度等级（对应 2-2048）
- 支持单个或多个分类组合学习
- **每个数字对应不同的英语单词**

### 3. **学习增强功能**
- ✅ **单词发音**：点击任意方块朗读单词
- ✅ **音效反馈**：移动、合并、游戏结束、胜利音效
- ✅ **进度追踪**：自动记录学习进度
- ✅ **统计分析**：游戏次数、学习单词数、游戏时长

### 4. **视觉效果**
- ✅ **平滑滑动动画**：方块移动时使用 CSS transform 实现流畅滑动
- ✅ **弹出动画**：新方块出现和合并时的缩放效果
- ✅ **渐变色彩**：11级颜色渐变，越高越深
- ✅ **特殊效果**：2048 方块金色文字 + 发光效果

### 5. **数据持久化**
- 自动保存最高分
- 本地存储学习历史
- 已学单词列表保存
- 游戏统计数据保存

### 6. **交互方式**
- **键盘控制**：方向键 ← ↑ → ↓ 或 WASD
- **触摸控制**：滑动手势操作
- **点击朗读**：点击方块听单词发音

## 🎮 如何使用

### 方法一：直接打开
1. 找到项目文件夹 `D:\claude\word2048-enhanced`
2. 双击 `index.html` 文件
3. 在浏览器中开始游戏

### 方法二：本地服务器（推荐）
```bash
cd D:\claude\word2048-enhanced
# 使用 Python 启动本地服务器
python -m http.server 8000
# 然后在浏览器访问 http://localhost:8000
```

## 📁 项目结构

```
word2048-enhanced/
├── index.html          # 主页面文件
├── styles.css          # 样式文件（包含滑动动画）
├── vocabulary.js       # 词汇库和音效系统
├── game.js            # 游戏核心逻辑（优化的渲染系统）
└── README.md          # 项目说明文档
```

## 🎯 游戏规则

1. **开始游戏**：初始随机生成 2 个单词方块（90%为2，10%为4）
2. **移动方块**：使用方向键或滑动手势
3. **合并规则**：
   - **只看右上角的数字**
   - 相同数字的方块碰撞后合并
   - 合并后数字翻倍：2+2=4, 4+4=8, 8+8=16... 直到2048
   - 方块上显示的单词会随着等级提升而变化
4. **得分规则**：合并得分 = 新方块的数字值
5. **胜利条件**：达到 2048（可以继续玩下去）
6. **游戏结束**：棋盘填满且无法合并时游戏结束

## 🎨 动画系统详解

### 核心动画技术
采用**增量渲染**而非全量刷新，实现流畅的动画效果：

1. **滑动动画**
   - 使用 CSS `transform: translate()` 实现方块平滑滑动
   - 不重新创建已存在的方块，只改变其位置
   - 动画时长：150ms

2. **出现动画**
   - 新方块淡入 + 缩放效果
   - 从0缩放到正常大小
   - 动画时长：200ms

3. **合并动画**
   - 弹跳效果：放大到1.2倍再恢复
   - 只在合并的方块上播放
   - 动画时长：300ms

4. **性能优化**
   - 只更新移动的方块，不刷新整个棋盘
   - 使用 tile ID 追踪每个方块的 DOM 元素
   - 动画期间阻止新的移动操作

### 动画流程
```
用户按下方向键
    ↓
计算所有方块的移动轨迹
    ↓
应用 transform 属性（滑动动画）
    ↓
150ms 后
    ↓
删除合并掉的旧方块
    ↓
创建合并后的新方块（弹出动画）
    ↓
重置所有方块的实际位置
    ↓
添加一个新的随机方块
```

## 📝 游戏逻辑说明

### 核心改动
- ✅ **合并判断只看数字**：不再需要单词相同，只要右上角数字相同即可合并
- ✅ **数字序列固定**：2→4→8→16→32→64→128→256→512→1024→2048
- ✅ **单词作为装饰**：单词和翻译作为学习内容，不影响游戏逻辑
- ✅ **跨分类合并**：不同分类的方块只要数字相同也可以合并
- ✅ **平滑动画**：优化渲染机制，只更新变化的方块

### 示例
```
[Cat 猫 (2)] + [Apple 苹果 (2)] = [Dog 狗 (4)]  ← 滑动动画
[Teacher 教师 (2)] + [Home 家 (2)] = [Bread 面包 (4)]  ← 滑动动画
数字相同即可合并，与分类和单词无关
```

## 🌟 特色亮点

### 视觉设计
- 渐变色彩主题区分分类
- 11级颜色深度递增
- 2048方块金色特效 + 发光
- **平滑流畅的滑动动画**
- 响应式布局适配移动端

### 音效系统
- 使用 Web Audio API 生成音效
- 移动音效
- 合并音效（根据等级音高递增）
- 游戏结束音效
- 达到2048胜利音效
- 可自由开关音效

### 学习追踪
- 实时显示已学单词数
- 统计页面查看学习进度
- 单词列表可点击朗读
- 游戏时长统计

## 🔧 技术栈

- **纯原生技术**：HTML5 + CSS3 + JavaScript
- **无外部依赖**：不需要安装任何库
- **Web API 使用**：
  - Web Speech API（单词朗读）
  - Web Audio API（音效系统）
  - LocalStorage（数据持久化）
  - CSS Transforms（动画效果）

## 🎯 技术亮点

### 优化的渲染系统
```javascript
// 传统方式（每次都重新渲染所有方块）
render() {
    container.innerHTML = '';  // 清空
    // 重新创建所有方块
}

// 优化方式（只更新移动的方块）
animateMoves(moves) {
    // 1. 只对移动的方块应用 transform
    // 2. 只删除合并掉的方块
    // 3. 只创建新产生的方块
}
```

### DOM 元素管理
- 使用 `tiles` 对象存储所有方块的 DOM 引用
- 每个方块有唯一的 ID
- 移动时不销毁 DOM，只改变 transform
- 大幅提升性能和动画流畅度

## 📊 统计功能

游戏内置完整的统计系统：
- 总游戏次数
- 累计学习单词数
- 历史最高分
- 总游戏时长
- 已学单词列表（可点击朗读）

## 🎨 自定义扩展

### 添加新单词
编辑 `vocabulary.js` 文件，在对应分类中添加：
```javascript
animals: [
    { word: 'Cat', meaning: '猫', level: 1, value: 2 },
    { word: 'Dog', meaning: '狗', level: 2, value: 4 },
    // level 1-11 对应 value 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048
]
```

### 调整动画速度
在 `game.js` 中修改：
```javascript
const animationDuration = 150; // 改为更大的值会更慢，更小的值会更快
```

### 添加新分类
1. 在 `vocabulary.js` 中添加新分类词汇（11个等级）
2. 在 `styles.css` 中添加对应的11级颜色样式
3. 在 `index.html` 中添加分类标签

## 🐛 已知问题与解决

- **问题**：快速连续按键可能导致动画混乱
- **解决**：添加了 `isMoving` 标志，动画期间阻止新操作

## 🎉 更新日志

### v2.2（当前版本）- 平滑滑动动画
- ✅ **重大改进**：实现平滑的方块滑动动画
- ✅ 优化渲染机制：增量更新而非全量刷新
- ✅ DOM 元素复用：方块移动时不销毁重建
- ✅ 性能优化：只更新变化的方块
- ✅ 动画防抖：避免快速操作导致的混乱
- ✅ 改进的弹出效果：合并时更自然的缩放动画

### v2.1 - 经典2048逻辑
- ✅ 核心逻辑改动：合并只看右上角数字
- ✅ 11级难度体系：2-2048
- ✅ 达到2048胜利提示和特效
- ✅ 扩展词汇库（每个分类11个单词）

### v2.0 - 增强版
- ✅ 单词发音、音效系统
- ✅ 数据持久化、学习统计
- ✅ UI/UX 优化

### v1.0 - 原始版
- 基础游戏机制

---

**祝你学习愉快，挑战2048！🎓🎯**

**体验流畅的滑动动画，享受学习的乐趣！✨**
